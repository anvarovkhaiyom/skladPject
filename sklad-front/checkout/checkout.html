<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏ ‚Äî –°–∫–ª–∞–¥ –ü—Ä–æ</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <nav id="navbar">
      <div class="nav-logo">
        <span>–°–∫–ª–∞–¥ –ü—Ä–æ</span>
        <span id="currentWarehouseName"></span>
      </div>

      <div class="menu-toggle" id="mobile-menu">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>

      <ul class="nav-links">
        <li data-role="SUPER_ADMIN">
          <a href="/admin/warehouses.html">–°–∫–ª–∞–¥—ã</a>
        </li>
        <li data-role="ADMIN">
          <a href="/category/categories.html">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</a>
        </li>
        <li data-role="ADMIN,SUPER_ADMIN">
          <a href="/currency/currencies.html">–í–∞–ª—é—Ç–∞</a>
        </li>
        <li data-role="ADMIN"><a href="/products/products.html">–¢–æ–≤–∞—Ä—ã</a></li>
        <li data-role="SUPER_ADMIN,ADMIN">
          <a href="/employees/employees.html">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</a>
        </li>
        <li data-role="SUPER_ADMIN,ADMIN">
          <a href="/clients/clients.html">–ö–ª–∏–µ–Ω—Ç—ã</a>
        </li>
        <li data-role="SUPER_ADMIN,ADMIN">
          <a href="/suppliers/suppliers.html">–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏</a>
        </li>
        <li data-role="ADMIN,EMPLOYEE">
          <a href="/checkout/checkout.html">–ü—Ä–æ–¥–∞–∂–∏</a>
        </li>
        <li data-role="ADMIN,EMPLOYEE">
          <a href="/supply/supplies.html">–ü—Ä–∏—Ö–æ–¥</a>
        </li>
        <li data-role="SUPER_ADMIN,ADMIN">
          <a href="/reports/reports.html">–û—Ç—á–µ—Ç—ã</a>
        </li>
        <li><a href="/index.html" onclick="logout()">–í—ã—Ö–æ–¥</a></li>
      </ul>
    </nav>

    <div id="alertModal" class="modal" style="display: none">
      <div class="modal-content" style="max-width: 400px; text-align: center">
        <h3 id="alertTitle">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</h3>
        <p id="alertMessage" style="margin: 20px 0"></p>
        <div class="modal-buttons">
          <button
            id="alertCloseBtn"
            class="btn"
            style="width: 100%; padding: 10px; cursor: pointer"
          >
            –ü–æ–Ω—è—Ç–Ω–æ
          </button>
        </div>
      </div>
    </div>

    <div class="container sale-container">
      <div class="sale-main">
        <div class="page-header">
          <h2>–ù–æ–≤–∞—è –ø—Ä–æ–¥–∞–∂–∞</h2>
        </div>

        <div class="sale-card">
          <div class="card-header">
            <h3>–î–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞</h3>
          </div>
          <div class="form-grid">
            <div class="form-group">
              <label>–ù–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞</label>
              <input
                type="text"
                id="docNumber"
                placeholder="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏"
                readonly
              />
            </div>
            <div class="form-group">
              <label>–ö–ª–∏–µ–Ω—Ç</label>
              <select id="selectClient">
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞...</option>
              </select>
            </div>
            <div class="form-group">
              <label>–ú–∞—Ä–∫–∞ –∞–≤—Ç–æ</label>
              <input type="text" id="carMark" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Toyota" />
            </div>
            <div class="form-group">
              <label>–ì–æ—Å. –Ω–æ–º–µ—Ä</label>
              <input type="text" id="carNumber" placeholder="01 A 001 AA" />
            </div>
            <div class="form-group">
              <label>–§–ò–û –≤–æ–¥–∏—Ç–µ–ª—è</label>
              <input type="text" id="driverName" placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤" />
            </div>
            <div class="form-group">
              <label>‚Ññ –î–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏</label>
              <input type="text" id="proxyNumber" placeholder="123456" />
            </div>
            <div class="form-group full-width-mobile">
              <label>–î–∞—Ç–∞ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏</label>
              <input type="date" id="proxyDate" />
            </div>
          </div>
        </div>

        <div class="sale-card">
          <div class="card-header">
            <h3>–í—ã–±–æ—Ä —Ç–æ–≤–∞—Ä–æ–≤</h3>
          </div>
          <div class="search-box">
            <input
              type="text"
              id="barcodeSearch"
              placeholder="üîç –°–∫–∞–Ω–∏—Ä—É–π—Ç–µ —à—Ç—Ä–∏—Ö-–∫–æ–¥ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –∞—Ä—Ç–∏–∫—É–ª..."
              onkeypress="handleBarcode(event)"
            />
          </div>
          <div class="table-wrapper">
            <table id="cartTable">
              <thead>
                <tr>
                  <th>–¢–æ–≤–∞—Ä</th>
                  <th>–¶–µ–Ω–∞</th>
                  <th>–ö–æ–ª-–≤–æ</th>
                  <th>–ò—Ç–æ–≥–æ</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="cartBody"></tbody>
            </table>
          </div>
        </div>
      </div>

      <aside class="sale-sidebar">
        <div class="total-card">
          <div class="total-row main-total">
            <span>–ò—Ç–æ–≥–æ:</span>
            <div>
              <span id="totalBaseDisplay">0</span>
              <span id="warehouseCurrencyLabel">‚Ç∏</span>
            </div>
          </div>

          <div class="payment-details">
            <div class="form-group">
              <label>–í–∞–ª—é—Ç–∞ –æ–ø–ª–∞—Ç—ã</label>
              <select
                id="payCurrency"
                onchange="changePaymentCurrency()"
              ></select>
            </div>

            <div
              id="rateContainer"
              class="form-group highlight-box"
              style="display: none"
            >
              <label>–ö—É—Ä—Å –æ–±–º–µ–Ω–∞</label>
              <input
                type="number"
                id="exchangeRate"
                step="0.0001"
                oninput="recalcForeignAmount()"
              />
            </div>

            <div class="form-group">
              <label>–ö –æ–ø–ª–∞—Ç–µ (–≤ –≤–∞–ª—é—Ç–µ)</label>
              <input
                type="number"
                id="payAmount"
                class="pay-input"
                oninput="calculateChange()"
              />
            </div>

            <div id="changeResult" class="change-info"></div>

            <div class="form-group">
              <label>–ú–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã</label>
              <select id="payMethod">
                <option value="cash">üíµ –ù–∞–ª–∏—á–Ω—ã–µ</option>
                <option value="card">üí≥ –ö–∞—Ä—Ç–∞ / –ë–µ–∑–Ω–∞–ª</option>
              </select>
            </div>

            <button class="btn-checkout" onclick="processSale()">
              ‚úÖ –û—Ñ–æ—Ä–º–∏—Ç—å –ø—Ä–æ–¥–∞–∂—É
            </button>
          </div>
        </div>
      </aside>
    </div>

    <script src="checkout.js"></script>
    <script src="/nav-guard.js"></script>
  </body>
</html>
